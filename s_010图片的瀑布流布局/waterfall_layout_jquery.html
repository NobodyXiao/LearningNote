<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="http://cdn.bootcss.com/jquery/1.12.3/jquery.js"></script>
	<style type="text/css">
	    *{padding: 0;margin:0;}
	    #main{
	        position: relative;
	    }
	    .box{
	        padding: 0 0 15px 15px;
	        float:left;
	    }
	    .pic{
	        padding: 10px;
	        border:1px solid #ccc;
	        box-shadow: 0 0 6px #ccc;
	        border-radius: 5px;
	    }
	    .box img{
	        width:162px;
	        height:auto;
	    }
	</style>

	<script>
		$(window).on("load",function() {
			console.log("window onloaded ");
			waterfall();
			var dataimage={"image":[{'src':'image/data/26.jpg'},
								{'src':'image/data/27.jpeg'},
								{'src':'image/data/28.jpg'},
								{'src':'image/data/29.jpg'},
								{'src':'image/data/30.jpg'},
								{'src':'image/data/31.jpeg'},
								{'src':'image/data/32.jpg'},
								{'src':'image/data/33.jpg'},
								{'src':'image/data/34.jpg'},
								{'src':'image/data/35.jpg'},
								{'src':'image/data/36.jpg'},
								{'src':'image/data/37.jpg'},
								{'src':'image/data/38.jpg'},
								{'src':'image/data/39.jpg'},
								{'src':'image/data/40.jpg'},
								{'src':'image/data/41.jpg'},
								{'src':'image/data/42.jpg'},
								{'src':'image/data/43.jpg'},
								{'src':'image/data/44.jpg'},
								{'src':'image/data/45.jpg'},
								{'src':'image/data/46.jpg'},
								{'src':'image/data/47.jpg'},
								{'src':'image/data/48.jpg'},
								{'src':'image/data/49.jpg'},
								{'src':'image/data/50.jpg'},
								{'src':'image/data/51.jpg'},
								]};
			window.onscroll=function(){
	       		// 拖动滚动条时
	     	}
		})
	function waterfall(){
		$boxs = $("#main>div");
		$pics = $(".pic");
		var boxw = $boxs.eq(0).outerWidth();
		var cols =Math.floor($(window).width/boxw);
		$("#main").width(boxw*cols).css("margin","0 auto"); 
		var picH = [];
		$boxs.each(function(index,value){
			var h=$boxs.eq(index).outerHeight();
			console.log(h);
			if(index < cols){
				picH[index] = h;
			}
			else{
				var minH = Math.min.apply(null,picH);
				var minHIndex = $.inArray(minH,picH);
				$(value).css({
					"position":"absolute",
					"top":minH+'px',
					"left":minHIndex*boxw+"px"
				})
				picH[minHIndex] += $boxs.eq(index).outerHeight();
			}
			console.log(picH);
		})
	}
</script>
	
</head>

<body>
<div id="main">
<div class="box">
	<div class="pic">
		<img src="image/1.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/2.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/3.png" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/4.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/5.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/6.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/7.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/8.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/9.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/10.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/11.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/12.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/13.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/14.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/15.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/16.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/17.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/18.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/19.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/20.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/21.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/22.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/23.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/24.jpg" alt="">
	</div>
</div>
<div class="box">
	<div class="pic">
		<img src="image/25.jpg" alt="">
	</div>
</div>	
</div>
	

</body>
</html>